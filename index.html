<head>
    <style>
        :root {
            --primary-color: #212121;
            --background-color: #111;
            --font: sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--background-color);
            font-family: var(--font);
            display: flex;
            justify-content: center;
            padding: 50px 0;
            height: 200vh;
            overflow-x: hidden;
        }

        .timeline {
            position: relative;
            background: var(--primary-color);
            padding: 20px;
            width: 400px;
        }

        .line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100px;
            z-index: 1;
            transition: height 0.3s ease;
        }

        .dot {
            position: absolute;
            width: 20px;
            height: 20px;
            background: white;
            border: 4px solid orangered;
            border-radius: 50%;
            top: 0;
            left: 50px;
            transform: translate(-50%, -50%);
            z-index: 10;
            transition: top 0.3s ease;
        }

        .card {
            margin: 50px 0;
            opacity: 0;
            transform: scale(0.9);
            transition: transform 0.3s ease, opacity 0.3s ease;
            z-index: 2;
        }

        .card.active {
            opacity: 1;
            transform: scale(1);
        }

        .info {
            background: #333;
            color: gray;
            border-radius: 10px;
            padding: 20px;
        }

        .title {
            color: orangered;
            margin-bottom: 10px;
        }
    </style>
</head>

<div class="timeline">
    <svg class="line">
        <path id="timeline-path" d="M 50 0" fill="none" stroke="orangered" stroke-width="5" />
    </svg>
    <div class="outer">
        <div class="dot"></div>
        <div class="card">
            <div class="info">
                <h3 class="title">Title 1</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
            </div>
        </div>
        <div class="card">
            <div class="info">
                <h3 class="title">Title 2</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
            </div>
        </div>
        <div class="card">
            <div class="info">
                <h3 class="title">Title 3</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
            </div>
        </div>
        <div class="card">
            <div class="info">
                <h3 class="title">Title 4</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
            </div>
        </div>
        <div class="card">
            <div class="info">
                <h3 class="title">Title 5</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const cards = document.querySelectorAll(".card");
        const dot = document.querySelector(".dot");
        const line = document.querySelector("#timeline-path");
        const cardCount = cards.length;
        
        const updateDotPosition = () => {
            const scrollTop = window.scrollY;
            const cardPositions = Array.from(cards).map((card) => {
                const rect = card.getBoundingClientRect();
                return {
                    top: rect.top + scrollTop,
                    height: rect.height,
                };
            });

            // Update line height to match the number of cards
            const lineHeight = cardCount * 150; // Adjust this multiplier for more or fewer items
            line.setAttribute("d", `M 50 0 Q 80 ${lineHeight}, 50 ${lineHeight * 2} T 50 ${lineHeight * 3}`);

            cardPositions.forEach((pos, index) => {
                const viewportCenter = window.innerHeight / 2 + scrollTop;
                if (viewportCenter >= pos.top && viewportCenter <= pos.top + pos.height) {
                    const offset = pos.top - scrollTop + pos.height / 2;
                    dot.style.top = `${offset}px`;

                    cards.forEach((card) => card.classList.remove("active"));
                    cards[index].classList.add("active");
                }
            });
        };

        window.addEventListener("scroll", updateDotPosition);
        updateDotPosition();
    });
</script>
